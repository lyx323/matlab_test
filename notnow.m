 clear; 
 clc; 
 x=load('F:\svn-workstation\artoolkit\t.txt');
 % load ??????? 
 Dt=0.03; % ?????? 
 k=size(x,1); 
 nx=[0:k-1]; 
 t=nx*Dt; 
 % ??????????? 
 figure(1); 
 plot(t,x); 
 xlabel(' time t/s'); 
 ylabel(' dis X/mm '); 
 title('the raw data of dis'); 
 grid on ; % ????????? 
 
 a=x(1:k-1);%???????????????? 
 b=x(2:k);%??????????????? 
 Dx=b-a; 
 v=Dx/Dt;%????????
 figure(2); 
 t1=[0:k-2]*Dt; 
 plot(t1,v);%?????????? 
 xlabel('time t/s');
 ylabel(' vel V mm/s'); 
 title('the raw data of velocity '); 
 grid on ; 
 
 % ?????????????? 
 N=k;%????? 110000???????? N=2^17; 
 f=((1-N)/2:(N-1)/2)*2000/N; 
 Xk=fft(x); 
 X=fftshift(Xk); 
 figure(3) 
 plot(f,abs(X));
 xlabel('frequency f/Hz');
 ylabel('S'); 
 title(' the frequency character before processing data');
 grid on ; 
 
 % ????????????????? 
 [n,wn]=buttord(0.5/1000,5/1000,0.1,60); 
 [b1,a1]=butter(n ,wn); % ?????????????? 
 y=filter(b1,a1,x); % ????????????? 
 figure(4); plot(t,y); 
 xlabel('time t/s');
 ylabel('dis X/mm '); 
 title('the processed data of dis '); 
 grid on; 
 
 % ?????????????????? 
 a2=y(6001:k-1);%???????????????? 3s 
 b2=y(6002:k); 
 Dx2=b2-a2; 
 v1=Dx2/Dt; 
 figure(5); 
 plot([6000:k-2]*Dt,v1); 
 xlabel('time t/s');
 ylabel('vel V mm/s'); 
 title('the processed data of velocity'); 
 grid on; 